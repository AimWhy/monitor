<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>web-performance</title>
  <link rel="stylesheet"
        href="./index.css">
</head>
<body>
<div>Performance example</div>
<script src="/wpDist/web-performance.min.js"></script>
<script>
  window.wv= new MITO.WebVitals({
    appId:'allen-test',
    version:'1.0.0',
    reportCallback:(metrics) => {
      const infos = wv.getCurrentMetrics().filter(metrics=>metrics.name.indexOf('info')>-1)

      const [pageInfo,networkInfo,deviceInfo] = infos

      function mergeData(data){
        const {data:metrics,...rest}=data
        return {...metrics,...rest,...pageInfo.value,...networkInfo.value,...deviceInfo.value}
      }

      // todo e.g Data cleaning
     console.log(mergeData(metrics))
    },
    immediately:true,
    customCompleteEvent:'custom-finish-paint'
  })

  setTimeout(()=>{
    wv.customCompletePaint()
  },5000)
</script>
</body>
</html>
