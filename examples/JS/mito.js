var MITO=function(e){"use strict";var t,r,n,o,a,i,s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)n[o]=a[i];return n}!function(e){e.UNKNOWN="UNKNOWN",e.UNKNOWN_FUNCTION="UNKNOWN_FUNCTION",e.JAVASCRIPT_ERROR="JAVASCRIPT_ERROR",e.BUSINESS_ERROR="BUSINESS_ERROR",e.LOG_ERROR="LOG_ERROR",e.FETCH_ERROR="HTTP_ERROR",e.VUE_ERROR="VUE_ERROR",e.REACT_ERROR="REACT_ERROR",e.RESOURCE_ERROR="RESOURCE_ERROR",e.PROMISE_ERROR="PROMISE_ERROR"}(t||(t={})),function(e){e.ROUTE="Route",e.CLICK="UI.Click",e.CONSOLE="Console",e.XHR="Xhr",e.FETCH="Fetch",e.UNHANDLEDREJECTION="Unhandledrejection",e.VUE="Vue",e.REACT="React",e.RESOURCE="Resource",e.CODE_ERROR="Code Error",e.CUSTOMER="Customer"}(r||(r={})),function(e){e.HTTP="http",e.USER="user",e.DEBUG="debug",e.EXCEPTION="exception"}(n||(n={})),function(e){e.XHR="xhr",e.FETCH="fetch",e.CONSOLE="console",e.DOM="dom",e.HISTORY="history",e.ERROR="error",e.HASHCHANGE="hashchange",e.UNHANDLEDREJECTION="unhandledrejection",e.MITO="mito",e.VUE="Vue"}(o||(o={})),function(e){e.XHR="xhr",e.FETCH="fetch"}(a||(a={})),function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.INTERNAL_EXCEPTION=500]="INTERNAL_EXCEPTION"}(i||(i={}));var u=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/,l={isLogAddBreadcrumb:!0,crossOriginThreshold:1e3};var f="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},p=(f.__MITO__=f.__MITO__||{},f.__MITO__);p.replaceFlag=p.replaceFlag||{};var d=p.replaceFlag;function h(e,t){d[e]||(d[e]=t)}function R(e){return!!d[e]}var E="MITO Logger",g=function(){function e(){var e=this;this.enabled=!0,this._console={};["log","debug","info","warn","error","assert"].forEach((function(t){t in f.console&&(e._console[t]=f.console[t])}))}return e.prototype.disable=function(){this.enabled=!1},e.prototype.bindOptions=function(e){this.enabled=!!e},e.prototype.enable=function(){this.enabled=!0},e.prototype.log=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(e=this._console).log.apply(e,c([E+"[Log]:"],t))},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(e=this._console).warn.apply(e,c([E+"[Warn]:"],t))},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(e=this._console).error.apply(e,c([E+"[Error]:"],t))},e}(),m=p.logger||(p.logger=new g);function y(){return"undefined"==typeof document||null==document.location?"":document.location.href}function O(e,t,r,n){void 0===n&&(n=!1),e.addEventListener(t,r,n)}function v(e,t,r){if(t in e){var n=r(e[t]);"function"==typeof n&&(e[t]=n)}}function b(){return Date.now()}function T(e,t){return typeof e===t}function N(e,t,r){return!!T(e,r)||(void 0!==e&&m.error(t+"期望传入"+r+"类型，目前是"+typeof e+"类型"),!1)}function C(e,t,r){return!!function(e,t){return Object.prototype.toString.call(e)===t}(e,r)||(void 0!==e&&m.error(t+"期望传入"+r+"类型，目前是"+typeof e+"类型"),!1)}function S(e){l.isLogAddBreadcrumb=!1,e(),l.isLogAddBreadcrumb=!0}function U(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}function I(e){return T(e,"string")?e:JSON.stringify(e)}function x(e){if(!e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+n}}function _(e,r){var n={time:b(),url:y(),name:e.name,level:r,message:e.message};if(void 0===e.stack||!e.stack)return n;for(var o,a,i,c=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),h=[],R=0,E=d.length;R<E;++R){if(a=c.exec(d[R])){var g=a[2]&&0===a[2].indexOf("native");a[2]&&0===a[2].indexOf("eval")&&(o=p.exec(a[2]))&&(a[2]=o[1],a[3]=o[2],a[4]=o[3]),i={url:g?null:a[2],func:a[1]||t.UNKNOWN_FUNCTION,args:g?[a[2]]:[],line:a[3]?+a[3]:null,column:a[4]?+a[4]:null}}else if(a=l.exec(d[R]))i={url:a[2],func:a[1]||t.UNKNOWN_FUNCTION,args:[],line:+a[3],column:a[4]?+a[4]:null};else{if(!(a=u.exec(d[R])))continue;a[3]&&a[3].indexOf(" > eval")>-1&&(o=f.exec(a[3]))?(a[3]=o[1],a[4]=o[2],a[5]=null):0!==R||a[5]||void 0===e.columnNumber||(h[0].column=e.columnNumber+1),i={url:a[3],func:a[1]||t.UNKNOWN_FUNCTION,args:a[2]?a[2].split(","):[],line:a[4]?+a[4]:null,column:a[5]?+a[5]:null}}!i.func&&i.line&&(i.func=t.UNKNOWN_FUNCTION),h.push(i)}return h.length?s(s({},n),{stack:h}):null}var H=Object.prototype.toString;function k(e){switch(H.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Error)}}function A(e){return"[object String]"===H.call(e)}var D,w,L=function(){function e(){this.stack=[],this.isFlushing=!1,"Promise"in f&&(this.micro=Promise.resolve())}return e.prototype.addFn=function(e){var t=this;"function"==typeof e&&("Promise"in f?(this.stack.push(e),this.isFlushing||(this.isFlushing=!0,this.micro.then((function(){return t.flushStack()})))):e())},e.prototype.flushStack=function(){var e=this.stack.slice(0);this.stack.length=0,this.isFlushing=!1;for(var t=0;t<e.length;t++)e[t]()},e}(),F=function(){function e(){this.maxBreadcrumbs=10,this.beforePushBreadcrumb=null,this.stack=[]}return e.prototype.push=function(e){var t=this;if("function"==typeof this.beforePushBreadcrumb){var r=null;return S((function(){r=t.beforePushBreadcrumb(t,e)})),void(r&&this.immediatePush(r))}this.immediatePush(e)},e.prototype.immediatePush=function(e){e.time=b(),this.stack.length>=this.maxBreadcrumbs&&this.shift(),this.stack.push(e),m.log(this.stack)},e.prototype.shift=function(){return void 0!==this.stack.shift()},e.prototype.getStack=function(){return this.stack},e.prototype.getCategory=function(e){switch(e){case r.XHR:case r.FETCH:return n.HTTP;case r.CLICK:case r.ROUTE:return n.USER;case r.CUSTOMER:case r.CONSOLE:return n.DEBUG;case r.UNHANDLEDREJECTION:case r.CODE_ERROR:case r.RESOURCE:case r.VUE:case r.REACT:default:return n.EXCEPTION}},e.prototype.bindOptions=function(e){void 0===e&&(e={});var t=e.maxBreadcrumbs,r=e.beforePushBreadcrumb;N(t,"maxBreadcrumbs","number")&&(this.maxBreadcrumbs=t),N(r,"beforePushBreadcrumb","function")&&(this.beforePushBreadcrumb=r)},e}(),P=p.breadcrumb||(p.breadcrumb=new F),j={};function X(e){var r,n=V(e.url.replace(/(\S+)(\/#\/)(\S*)/,"$1").replace(/(\S*)(\/\/)(\S+)/,"$3"));switch(e.type){case t.FETCH_ERROR:r=e.type+e.request.method+e.response.status+V(e.request.url)+n;break;case t.JAVASCRIPT_ERROR:case t.VUE_ERROR:case t.REACT_ERROR:r=e.type+e.name+e.message+n;break;case t.BUSINESS_ERROR:case t.LOG_ERROR:r=e.customTag+e.type+e.name+n;break;case t.PROMISE_ERROR:r=function(e,t){var r=V(e.url);if(e.name===o.UNHANDLEDREJECTION)return e.type+M(e.message)+t;return e.type+e.name+M(e.message)+r}(e,n);break;default:r=e.type+e.message+n}return r=function(e){var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);t=(t<<5)-t+n,t&=t}return t}(r),"number"==typeof j[r]?j[r]++:j[r]=1,j[r]>2?null:r}function M(e){var t=function(e){return Object.keys(e).sort().reduce((function(r,n){return"[object Object]"===Object.prototype.toString.call(e[n])?r[n]=t(e[n]):r[n]=e[n],r}),{})};try{if(/\{.*\}/.test(e)){var r=JSON.parse(e);return r=t(r),JSON.stringify(r)}}catch(t){return e}}function V(e){return e.replace(/[\?#].*$/,"").replace(/\/\d+([\/]*$)/,"{param}$1")}function B(e){var r="",n=e.elapsedTime,o=e.time,a=e.method,i=e.traceId,s=e.type,c=e.status;return r=0===c?n<=l.crossOriginThreshold?"http请求失败，失败原因：跨域限制或域名不存在":"http请求失败，失败原因：超时":function(e){if(e<400)return w.Ok;if(e>=400&&e<500)switch(e){case 401:return w.Unauthenticated;case 403:return w.PermissionDenied;case 404:return w.NotFound;case 409:return w.AlreadyExists;case 413:return w.FailedPrecondition;case 429:return w.ResourceExhausted;default:return w.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return w.Unimplemented;case 503:return w.Unavailable;case 504:return w.DeadlineExceeded;default:return w.InternalError}return w.UnknownError}(c),{type:t.FETCH_ERROR,url:y(),time:o,elapsedTime:n,level:D.Low,message:r,name:s+"--"+a,request:{httpType:s,traceId:i,method:a,url:e.url,data:e.reqData||""},response:{status:c,data:e.responseText}}}!function(e){e.Else="else",e.Error="error",e.Warning="warning",e.Info="info",e.Debug="debug",e.Low="low",e.Normal="normal",e.High="high",e.Critical="critical"}(D||(D={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":case"log":case"assert":return e.Info;case"warn":case"warning":return e.Warning;case e.Low:case e.Normal:case e.High:case e.Critical:case"error":return e.Error;default:return e.Else}}}(D||(D={})),function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(w||(w={}));var J={img:"图片",script:"js脚本"};var $,q,K,W,G=function(){function e(e){this.url=e,this.beforeDataReport=null,this.backTrackerId=null,this.configReportXhr=null,this.apikey="",this.queue=new L}return e.prototype.imgRequest=function(t){var r;e.img.src=this.url+"?"+(r=t,Object.entries(r).reduce((function(e,t,r){return 0!==r&&(e+="&"),e+=t[0]+"="+t[1]}),""))},e.prototype.getRecord=function(){var e,t=p.record;return t&&(e=t,"[object Array]"===H.call(e))&&t.length>2?t:[]},e.prototype.xhrPost=function(e){var t=this;this.queue.addFn((function(){if("undefined"!=typeof XMLHttpRequest&&("function"!=typeof t.beforeDataReport||(e=t.beforeDataReport(e)))){var r=new XMLHttpRequest;r.open("POST",t.url),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.withCredentials=!0,"function"==typeof t.configReportXhr&&t.configReportXhr(r);var n=X(e);n&&(e.errorId=n,r.send(JSON.stringify(t.getTransportData(e))))}}))},e.prototype.getAuthInfo=function(){var e=this.getTrackerId();return{trackerId:String(e),sdkVersion:"1.2.0",sdkName:"@zyf2e/mitojs",apikey:this.apikey}},e.prototype.getTrackerId=function(){if("function"==typeof this.backTrackerId){var e=this.backTrackerId();if("string"==typeof e||"number"==typeof e)return e;m.error("trackerId:"+e+" 期望 string 或 number 类型，但是传入 "+typeof e)}return""},e.prototype.getTransportData=function(e){return{authInfo:this.getAuthInfo(),breadcrumb:P.getStack(),data:e,record:this.getRecord()}},e.prototype.isSdkTransportUrl=function(e){return-1!==e.indexOf(this.url)},e.prototype.bindOptions=function(e){void 0===e&&(e={});var t=e.dsn,r=e.beforeDataReport,n=e.apikey,o=e.configReportXhr,a=e.backTrackerId;N(n,"apikey","string")&&(this.apikey=n),N(t,"dsn","string")&&(this.url=t),N(r,"beforeDataReport","function")&&(this.beforeDataReport=r),N(o,"configReportXhr","function")&&(this.configReportXhr=o),N(a,"backTrackerId","function")&&(this.backTrackerId=a)},e.prototype.send=function(e){this.xhrPost(e)},e.img=new Image,e}(),Y=p.transportData||(p.transportData=new G("//localhost:3000/api/error/error.gif")),Z={handleHttp:function(e,t){var n=0===e.status||e.status===i.BAD_REQUEST||e.status>i.UNAUTHORIZED,o=B(e);P.push({type:t,category:P.getCategory(t),data:o,level:D.Info}),n&&(P.push({type:t,category:P.getCategory(r.CODE_ERROR),data:o,level:D.Error}),Y.send(o))},handleError:function(e){if(e.target.localName){var n=function(e){return{type:t.RESOURCE_ERROR,url:y(),message:"资源地址: "+(e.src.slice(0,100)||e.href.slice(0,100)),level:D.Low,time:b(),name:(J[e.localName]||e.localName)+"加载失败"}}(e.target);return P.push({type:r.RESOURCE,category:P.getCategory(r.RESOURCE),data:n,level:D.Error}),Y.send(n)}var o,a=e.message,i=e.filename,s=e.lineno,c=e.colno,u=e.error;u&&k(u)&&(o=_(u,D.Normal)),o||(o=Z.handleNotErrorInstance(a,i,s,c)),o.type=t.JAVASCRIPT_ERROR,P.push({type:r.CODE_ERROR,category:P.getCategory(r.CODE_ERROR),data:o,level:D.Error}),Y.send(o)},handleNotErrorInstance:function(e,r,n,o){var a=t.UNKNOWN,i=r||y(),s=e,c=e.match(u);c[1]&&(a=c[1],s=c[2]);var l={url:i,func:t.UNKNOWN_FUNCTION,args:t.UNKNOWN,line:n,col:o};return{url:i,name:a,message:s,level:D.Normal,time:b(),stack:[l]}},handleHistory:function(e){var t=e.from,n=e.to,o=x(t).relative,a=x(n).relative;P.push({type:r.ROUTE,category:P.getCategory(r.ROUTE),data:{from:o||"/",to:a||"/"},level:D.Info})},handleHashchange:function(e){var t=e.oldURL,n=e.newURL,o=x(t).relative,a=x(n).relative;P.push({type:r.ROUTE,category:P.getCategory(r.ROUTE),data:{from:o,to:a},level:D.Info})},handleUnhandleRejection:function(e){var n={type:t.PROMISE_ERROR,message:JSON.stringify(e.reason),url:y(),name:e.type,time:b(),level:D.Low};k(e.reason)&&(n=s(s({},n),_(e.reason,D.Low))),P.push({type:r.UNHANDLEDREJECTION,category:P.getCategory(r.UNHANDLEDREJECTION),data:n,level:D.Error}),Y.send(n)},handleConsole:function(e){l.isLogAddBreadcrumb&&P.push({type:r.CONSOLE,category:P.getCategory(r.CONSOLE),data:e,level:D.fromString(e.level)})}},z=function(){function e(){this.traceIdFieldName="Trace-Id",this.enableTraceId=!1}return e.prototype.bindOptions=function(e){void 0===e&&(e={});var t=e.beforeAppAjaxSend,r=e.enableTraceId,n=e.filterXhrUrlRegExp,o=e.traceIdFieldName;N(t,"beforeAppAjaxSend","function")&&(this.beforeAppAjaxSend=t),N(r,"enableTraceId","boolean")&&(this.enableTraceId=r),N(o,"traceIdFieldName","string")&&(this.traceIdFieldName=o),C(n,"filterXhrUrlRegExp","[object RegExp]")&&(this.filterXhrUrlRegExp=n)},e}(),Q=p.options||(p.options=new z),ee={},te=($=oe,q=600,K=!0,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];K&&($.apply(this,e),K=!1,setTimeout((function(){K=!0}),q))});function re(e){switch(e){case o.XHR:!function(){if(!("XMLHttpRequest"in f))return;var e=XMLHttpRequest.prototype;v(e,"open",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.mito_xhr={method:A(t[0])?t[0].toUpperCase():t[0],url:t[1],sTime:b(),type:a.XHR},e.apply(this,t)}})),v(e,"send",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.mito_xhr,a=n.method,i=n.url;if(!Q.filterXhrUrlRegExp||!Q.filterXhrUrlRegExp.test(i)){if(Q.enableTraceId){var s=U();this.mito_xhr.traceId=s,this.setRequestHeader(Q.traceIdFieldName,s)}Q.beforeAppAjaxSend&&Q.beforeAppAjaxSend({method:a,url:i},this),O(this,"loadend",(function(){if(!("POST"===a&&Y.isSdkTransportUrl(i)||Q.filterXhrUrlRegExp&&Q.filterXhrUrlRegExp.test(this.mito_xhr.url))){var e=this.responseType,r=this.response,n=this.status;this.mito_xhr.reqData=t[0];var s=b();this.mito_xhr.time=s,this.mito_xhr.status=n,-1!==["","json","text"].indexOf(e)&&(this.mito_xhr.responseText="object"==typeof r?JSON.stringify(r):r),this.mito_xhr.elapsedTime=s-this.mito_xhr.sTime,oe(o.XHR,this.mito_xhr)}})),e.apply(this,t)}}}))}();break;case o.FETCH:!function(){if(!("fetch"in f))return;v(f,o.FETCH,(function(e){return function(t,r){if(void 0===r&&(r={}),!ae(t)){var n=b(),c=r&&r.method||"GET",u={type:a.FETCH,method:c,reqData:r&&r.body,url:t},l=new Headers(r.headers||{});return Object.assign(l,{setRequestHeader:l.set}),Q.beforeAppAjaxSend&&Q.beforeAppAjaxSend({method:c,url:t},l),r=s(s({},r),{headers:l}),e.apply(f,[t,r]).then((function(e){var r=e.clone(),a=b();return u=s(s({},u),{elapsedTime:a-n,status:r.status,time:a}),r.text().then((function(e){"POST"===c&&Y.isSdkTransportUrl(t)||ae(t)||(u.responseText=r.status>i.UNAUTHORIZED&&e,oe(o.FETCH,u))})),e}),(function(e){var r=b();if(!("POST"===c&&Y.isSdkTransportUrl(t)||ae(t)))throw u=s(s({},u),{elapsedTime:r-n,status:0,time:r}),oe(o.FETCH,u),e}))}}}))}();break;case o.ERROR:O(f,"error",(function(e){oe(o.ERROR,e)}),!0);break;case o.CONSOLE:!function(){if(!("console"in f))return;["log","debug","info","warn","error","assert"].forEach((function(e){e in f.console&&v(f.console,e,(function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t&&(oe(o.CONSOLE,{args:r,level:e}),t.apply(f.console,r))}}))}))}();break;case o.HISTORY:!function(){if(!function(){var e=f,t=e.chrome,r=t&&t.app&&t.app.runtime,n="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!r&&n}())return;var e=f.onpopstate;function t(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.length>2?t[2]:void 0;if(n){var a=W,i=String(n);W=i,oe(o.HISTORY,{from:a,to:i})}return e.apply(this,t)}}f.onpopstate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=y(),a=W;oe(o.HISTORY,{from:a,to:n}),e&&e.apply(this,t)},v(f.history,"pushState",t),v(f.history,"replaceState",t)}();break;case o.UNHANDLEDREJECTION:O(f,o.UNHANDLEDREJECTION,(function(e){oe(o.UNHANDLEDREJECTION,e)}));break;case o.DOM:!function(){if(!("document"in f))return;O(f.document,"click",(function(){te(o.DOM,{category:"click",data:this})}),!0)}();break;case o.HASHCHANGE:t="onpopstate",f.hasOwnProperty(t)||O(f,o.HASHCHANGE,(function(e){oe(o.HASHCHANGE,e)}))}var t}function ne(e){e&&(R(e.type)||(h(e.type,!0),ee[e.type]=ee[e.type]||[],ee[e.type].push(e.callback),re(e.type)))}function oe(e,t){e&&ee[e]&&ee[e].forEach((function(r){!function(e,t){try{e()}catch(e){console.log("err",e),t&&t(e)}}((function(){r(t)}),(function(t){m.error("重写事件triggerHandlers的回调函数发生错误\nType:"+e+"\nName: "+function(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}}(r)+"\nError: "+t)}))}))}function ae(e){return Q.filterXhrUrlRegExp&&Q.filterXhrUrlRegExp.test(e)}function ie(e){var n=e.message,o=void 0===n?"emptyMsg":n,a=e.tag,i=void 0===a?"":a,c=e.level,u=void 0===c?D.Critical:c,l=e.ex,f=void 0===l?"":l,p={};k(f)&&(p=_(f,u));var d=s({type:t.LOG_ERROR,level:u,message:I(o),name:"MITO.log",customTag:I(i),time:b(),url:y()},p);P.push({type:r.CUSTOMER,category:P.getCategory(r.CUSTOMER),data:o,level:D.fromString(u.toString())}),Y.send(d)}function se(e,n,o,a,i){var s=function(e){if(e.$root===e)return"root";var t=e._isVue?e.$options&&e.$options.name||e.$options&&e.$options._componentTag:e.name;return(t?"component <"+t+">":"anonymous component")+(e._isVue&&e.$options&&e.$options.__file?" at "+(e.$options&&e.$options.__file):"")}(n),c=n.$options&&n.$options.propsData,u={type:t.VUE_ERROR,message:e.message+"("+o+")",level:a,url:y(),componentName:s,propsData:c||"",name:e.name,stack:e.stack||[],time:b()};P.push({type:r.VUE,category:P.getCategory(r.VUE),data:u,level:i}),Y.send(u)}W=y();var ce="undefined"!=typeof console,ue={install:function(e){!R(o.VUE)&&e&&e.config&&(h(o.VUE,!0),e.config.errorHandler=function(t,r,n){se.apply(null,[t,r,n,D.Normal,D.Error]),ce&&!e.config.silent&&S((function(){console.error("Error in "+n+': "'+t.toString()+'"',r),console.error(t)}))})}};function le(e){void 0===e&&(e={}),"addEventListener"in document&&!e.disabled&&(fe(e),ne({callback:function(e){Z.handleHttp(e,r.XHR)},type:o.XHR}),ne({callback:function(e){Z.handleHttp(e,r.FETCH)},type:o.FETCH}),ne({callback:function(e){Z.handleError(e)},type:o.ERROR}),ne({callback:function(e){Z.handleConsole(e)},type:o.CONSOLE}),ne({callback:function(e){Z.handleHistory(e)},type:o.HISTORY}),ne({callback:function(e){Z.handleUnhandleRejection(e)},type:o.UNHANDLEDREJECTION}),ne({callback:function(e){var t=function(e){var t=e.tagName.toLowerCase();if("body"===t)return null;var r=e.classList.value;return r=""!==r?' class="'+r+'"':"","<"+t+(e.id?' id="'+e.id:"")+(""!==r?r:"")+">"+e.innerText+"</"+t+">"}(e.data.activeElement);t&&P.push({type:r.CLICK,category:P.getCategory(r.CLICK),data:t,level:D.Info})},type:o.DOM}),ne({callback:function(e){Z.handleHashchange(e)},type:o.HASHCHANGE}))}function fe(e){var t;void 0===e&&(e={}),void 0===(t=e)&&(t={}),h(o.XHR,!!t.silentXhr),h(o.FETCH,!!t.silentFetch),h(o.CONSOLE,!!t.silentConsole),h(o.DOM,!!t.silentDom),h(o.HISTORY,!!t.silentHistory),h(o.ERROR,!!t.silentError),h(o.HASHCHANGE,!!t.silentHashchange),h(o.UNHANDLEDREJECTION,!!t.silentUnhandledrejection),h(o.VUE,!!t.silentVue),P.bindOptions(e),m.bindOptions(e.debug),Y.bindOptions(e),Q.bindOptions(e)}function pe(e,t,r,n){void 0===e&&(e=""),void 0===t&&(t="emptyMsg"),void 0===r&&(r=""),void 0===n&&(n=D.Critical),ie({message:t,tag:e,ex:r,level:n})}function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&("string"==typeof e[0]?pe.apply(void 0,e):ie(e[0]))}return function(e,t){void 0===t&&(t=!1);var r=document.querySelector("script[apikey]"),n=null;r&&(n=r.getAttribute("apikey"));var o=-1!==location.href.indexOf(".qa.");(t?o:!o)&&n&&(f.Vue&&ue.install(f.Vue),document.addEventListener("DOMContentLoaded",(function(){ue.install(f.Vue)})),f.tryCatch={log:de},e({customTag:r.getAttribute("customTag"),apikey:n}))}((function(e){var r=e.customTag;le({maxBreadcrumbs:20,apikey:e.apikey,dsn:"https://trycatch-end.91jkys.com/errors/upload",debug:!1,enableTraceId:!1,filterXhrUrlRegExp:/(login|register|password)/,beforePushBreadcrumb:function(e,t){return function(e,t){if(t.category===n.HTTP){var r=t.data;r.response.status>=200&&r.response.status<300&&(r.response.data="")}return t}(0,t)},beforeDataReport:function(e){return function(e,r){switch(e.type){case t.JAVASCRIPT_ERROR:if("Script error."===e.message)return!1}return!e.customTag&&r&&(e.customTag=r),e}(e,r)},beforeAppAjaxSend:function(e,t){return function(e,t){e.method;var r=e.url;if(/apigw/.test(r)){var n=window.navigator.userAgent,o=window.APP_INFO||null,a=n.match(/AppInfo\((.*?);(.*?);/);a&&a.length>=3&&(o=a[1]+";version="+a[2]+";platform=H5");var i=null,s=n.match(/DeviceId\((.*?)\)/);s&&s.length>=2&&(i=s[1]),t.setRequestHeader("App-Info",o),t.setRequestHeader("Device-Id",i)}}({method:e.method,url:e.url},t)}})}),!0),e.MitoVue=ue,e.SDK_NAME="@zyf2e/mitojs",e.SDK_VERSION="1.2.0",e.errorBoundaryReport=function(e){if(k(e)){var n=_(e,D.Normal);n.type=t.REACT_ERROR,P.push({type:r.REACT,category:P.getCategory(r.REACT),data:n.name+": "+n.message,level:D.fromString(n.level)}),Y.send(n)}else console.warn("传入的react error不是一个object Error")},e.log=de,e}({});
