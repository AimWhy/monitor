{"version":3,"file":"wx-mini.esm.js","sources":["../../../node_modules/tslib/tslib.es6.js","../src/utils.ts","../src/constant.ts","../src/handleWxEvents.ts","../src/replace.ts","../src/load.ts","../src/initiative.ts","../../vue/src/helper.ts","../../vue/src/index.ts","../../react/src/index.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { generateUUID, getTimestamp, setUrlQuery, variableTypeDetection } from '@mitojs/utils'\nimport { DeviceInfo, IAnyObject, LocalStorageValue } from '@mitojs/types'\nimport { SDK_NAME } from '@mitojs/shared'\nconst LocalStorageSessionIdKey = `${SDK_NAME}:sessionId`\nconst LocalStorageChannelKey = `${SDK_NAME}:Channel`\n\n/**\n * 后退时需要计算当前页面地址\n * @param delta 返回的页面数，如果 delta 大于现有页面数，则返回到首页\n */\nexport function getNavigateBackTargetUrl(delta: number | undefined) {\n  if (!variableTypeDetection.isFunction(getCurrentPages)) {\n    return ''\n  }\n  const pages = getCurrentPages() // 在App里调用该方法，页面还没有生成，长度为0\n  if (!pages.length) {\n    return 'App'\n  }\n  delta = delta || 1\n  const toPage = pages[pages.length - delta]\n  return setUrlQuery(toPage.route, toPage.options)\n}\n\n/**\n * 返回包含id、data字符串的标签\n * @param e wx BaseEvent\n */\nexport function targetAsString(e: WechatMiniprogram.BaseEvent): string {\n  const id = e.currentTarget?.id ? ` id=\"${e.currentTarget?.id}\"` : ''\n  const dataSets = Object.keys(e.currentTarget.dataset).map((key) => {\n    return `data-${key}=${e.currentTarget.dataset[key]}`\n  })\n  return `<element ${id} ${dataSets.join(' ')}/>`\n}\n\nexport async function getWxMiniDeviceInfo(): Promise<DeviceInfo> {\n  const { pixelRatio, screenHeight, screenWidth } = wx.getSystemInfoSync()\n  const netType = await getWxMiniNetWrokType()\n  return {\n    ratio: pixelRatio,\n    clientHeight: screenHeight,\n    clientWidth: screenWidth,\n    netType\n  }\n}\n\nexport async function getWxMiniNetWrokType(): Promise<string> {\n  return new Promise((resolve, reject) => {\n    wx.getNetworkType({\n      success(res) {\n        resolve(res.networkType)\n      },\n      fail(err) {\n        console.error(`获取微信小程序网络类型失败:${err}`)\n        resolve('getNetWrokType failed')\n      }\n    })\n  })\n}\n","export enum ELinstenerTypes {\n  Touchmove = 'touchmove',\n  Tap = 'tap',\n  Longtap = 'longtap',\n  Longpress = 'longpress'\n}\n","import { BREADCRUMBTYPES, ERRORTYPES } from '@mitojs/shared'\nimport { breadcrumb, handleConsole, httpTransform, transportData, options as sdkOptions } from '@mitojs/core'\nimport { ReportDataType, Replace, MITOHttp } from '@mitojs/types'\nimport {\n  extractErrorStack,\n  getCurrentRoute,\n  getTimestamp,\n  isError,\n  isHttpFail,\n  parseErrorString,\n  unknownToString,\n  _support\n} from '@mitojs/utils'\nimport { Severity } from '@mitojs/utils'\nimport { getWxMiniDeviceInfo, targetAsString } from './utils'\nimport { MiniRoute, WxLifeCycleBreadcrumb, WxOnShareAppMessageBreadcrumb, WxOnTabItemTapBreadcrumb } from './types'\nimport { ELinstenerTypes } from './constant'\n\nconst HandleWxAppEvents = {\n  onLaunch(options: WechatMiniprogram.App.LaunchShowOption) {\n    sdkOptions.appOnLaunch(options)\n    const data: WxLifeCycleBreadcrumb = {\n      path: options.path,\n      query: options.query\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.APP_ON_LAUNCH),\n      type: BREADCRUMBTYPES.APP_ON_LAUNCH,\n      data,\n      level: Severity.Info\n    })\n  },\n  async onShow(options: WechatMiniprogram.App.LaunchShowOption) {\n    _support.deviceInfo = await getWxMiniDeviceInfo()\n    sdkOptions.appOnShow(options)\n    const data: WxLifeCycleBreadcrumb = {\n      path: options.path,\n      query: options.query\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.APP_ON_SHOW),\n      type: BREADCRUMBTYPES.APP_ON_SHOW,\n      data,\n      level: Severity.Info\n    })\n  },\n  onHide() {\n    sdkOptions.appOnHide()\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.APP_ON_HIDE),\n      type: BREADCRUMBTYPES.APP_ON_HIDE,\n      data: null,\n      level: Severity.Info\n    })\n  },\n  onError(error: string) {\n    const parsedError = parseErrorString(error)\n    const data: ReportDataType = {\n      ...parsedError,\n      time: getTimestamp(),\n      level: Severity.Normal,\n      url: getCurrentRoute(),\n      type: ERRORTYPES.JAVASCRIPT_ERROR\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.CODE_ERROR),\n      type: BREADCRUMBTYPES.CODE_ERROR,\n      level: Severity.Error,\n      data: { ...data }\n    })\n    transportData.send(data)\n  },\n  onUnhandledRejection(ev: WechatMiniprogram.OnUnhandledRejectionCallbackResult) {\n    let data: ReportDataType = {\n      type: ERRORTYPES.PROMISE_ERROR,\n      message: unknownToString(ev.reason),\n      url: getCurrentRoute(),\n      name: 'unhandledrejection', // 小程序当初onUnhandledRejection回调中无type参数，故写死\n      time: getTimestamp(),\n      level: Severity.Low\n    }\n    if (isError(ev.reason)) {\n      data = {\n        ...data,\n        ...extractErrorStack(ev.reason, Severity.Low),\n        url: getCurrentRoute()\n      }\n    }\n    breadcrumb.push({\n      type: BREADCRUMBTYPES.UNHANDLEDREJECTION,\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.UNHANDLEDREJECTION),\n      data: { ...data },\n      level: Severity.Error\n    })\n    transportData.send(data)\n  },\n  onPageNotFound(data: WechatMiniprogram.OnPageNotFoundCallbackResult) {\n    sdkOptions.onPageNotFound(data)\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.ROUTE),\n      type: BREADCRUMBTYPES.ROUTE,\n      data,\n      level: Severity.Error\n    })\n  }\n}\n\nconst HandleWxPageEvents = {\n  onShow() {\n    const page = getCurrentPages().pop()\n    sdkOptions.pageOnShow(page)\n    const data: WxLifeCycleBreadcrumb = {\n      path: page.route,\n      query: page.options\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.PAGE_ON_SHOW),\n      type: BREADCRUMBTYPES.PAGE_ON_SHOW,\n      data,\n      level: Severity.Info\n    })\n  },\n  onHide() {\n    const page = getCurrentPages().pop()\n    sdkOptions.pageOnHide(page)\n    const data: WxLifeCycleBreadcrumb = {\n      path: page.route,\n      query: page.options\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.PAGE_ON_HIDE),\n      type: BREADCRUMBTYPES.PAGE_ON_HIDE,\n      data,\n      level: Severity.Info\n    })\n  },\n  onShareAppMessage(options: WechatMiniprogram.Page.IShareAppMessageOption) {\n    const page = getCurrentPages().pop()\n    sdkOptions.onShareAppMessage({\n      ...page,\n      ...options\n    })\n    const data: WxOnShareAppMessageBreadcrumb = {\n      path: page.route,\n      query: page.options,\n      options\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.PAGE_ON_SHARE_APP_MESSAGE),\n      type: BREADCRUMBTYPES.PAGE_ON_SHARE_APP_MESSAGE,\n      data,\n      level: Severity.Info\n    })\n  },\n  onShareTimeline() {\n    const page = getCurrentPages().pop()\n    sdkOptions.onShareTimeline(page)\n    const data: WxLifeCycleBreadcrumb = {\n      path: page.route,\n      query: page.options\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.PAGE_ON_SHARE_TIMELINE),\n      type: BREADCRUMBTYPES.PAGE_ON_SHARE_TIMELINE,\n      data,\n      level: Severity.Info\n    })\n  },\n  onTabItemTap(options: WechatMiniprogram.Page.ITabItemTapOption) {\n    const page = getCurrentPages().pop()\n    sdkOptions.onTabItemTap({\n      ...page,\n      ...options\n    })\n    const data: WxOnTabItemTapBreadcrumb = {\n      path: page.route,\n      query: page.options,\n      options\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.PAGE_ON_TAB_ITEM_TAP),\n      type: BREADCRUMBTYPES.PAGE_ON_TAB_ITEM_TAP,\n      data,\n      level: Severity.Info\n    })\n  },\n  onAction(e: WechatMiniprogram.BaseEvent) {\n    sdkOptions.triggerWxEvent(e)\n    let type = BREADCRUMBTYPES.TOUCHMOVE\n    if (e.type === ELinstenerTypes.Tap) {\n      type = BREADCRUMBTYPES.TAP\n    }\n    breadcrumb.push({\n      category: breadcrumb.getCategory(type),\n      type,\n      data: targetAsString(e),\n      level: Severity.Info\n    })\n  }\n}\n\nconst HandleWxConsoleEvents = {\n  console(data: Replace.TriggerConsole) {\n    handleConsole(data)\n  }\n}\n\nconst HandleNetworkEvents = {\n  handleRequest(data: MITOHttp): void {\n    const result = httpTransform(data)\n    result.url = getCurrentRoute()\n    if (data.status === undefined) {\n      result.message = data.errMsg\n    }\n    const type = BREADCRUMBTYPES.XHR\n    breadcrumb.push({\n      type,\n      category: breadcrumb.getCategory(type),\n      data: result,\n      level: Severity.Info\n    })\n    if (isHttpFail(data.status)) {\n      breadcrumb.push({\n        type,\n        category: breadcrumb.getCategory(BREADCRUMBTYPES.CODE_ERROR),\n        data: { ...result },\n        level: Severity.Error\n      })\n      transportData.send(result)\n    }\n  }\n}\n\nconst HandleWxEvents = {\n  handleRoute(data: MiniRoute) {\n    if (data.isFail) {\n      breadcrumb.push({\n        type: BREADCRUMBTYPES.ROUTE,\n        category: breadcrumb.getCategory(BREADCRUMBTYPES.CODE_ERROR),\n        data,\n        level: Severity.Error\n      })\n\n      const reportData = {\n        type: ERRORTYPES.ROUTE_ERROR,\n        message: data.message,\n        url: data.to,\n        name: 'MINI_' + ERRORTYPES.ROUTE_ERROR,\n        level: Severity.Error\n      }\n\n      return transportData.send(reportData)\n    }\n    breadcrumb.push({\n      type: BREADCRUMBTYPES.ROUTE,\n      category: breadcrumb.getCategory(BREADCRUMBTYPES.ROUTE),\n      data,\n      level: Severity.Info\n    })\n  }\n}\n\nexport { HandleWxAppEvents, HandleWxPageEvents, HandleWxConsoleEvents, HandleNetworkEvents, HandleWxEvents }\n","import { options as sdkOptions, ReplaceHandler, setTraceId, subscribeEvent, transportData, triggerHandlers } from '@mitojs/core'\nimport { WxAppEvents, WxPageEvents, WxRouteEvents, WxEvents, EVENTTYPES, HTTPTYPE, voidFun } from '@mitojs/shared'\nimport { getTimestamp, replaceOld, throttle, getFlag, isEmptyObject, variableTypeDetection, getCurrentRoute } from '@mitojs/utils'\nimport { HandleWxAppEvents, HandleWxPageEvents } from './handleWxEvents'\nimport { MITOHttp } from '@mitojs/types'\nimport { EMethods } from '@mitojs/types'\nimport { getNavigateBackTargetUrl } from './utils'\nimport { ELinstenerTypes } from './constant'\nimport { MiniRoute } from './types'\n\nfunction isFilterHttpUrl(url: string) {\n  return sdkOptions.filterXhrUrlRegExp && sdkOptions.filterXhrUrlRegExp.test(url)\n}\n\nfunction replace(type: WxEvents | EVENTTYPES) {\n  switch (type) {\n    case EVENTTYPES.CONSOLE:\n      replaceConsole()\n      break\n    case EVENTTYPES.XHR:\n      replaceNetwork()\n      break\n    case EVENTTYPES.MINI_ROUTE:\n      replaceRoute()\n    default:\n      break\n  }\n}\n\nexport function addReplaceHandler(handler: ReplaceHandler) {\n  if (!subscribeEvent(handler)) return\n  replace(handler.type as WxEvents)\n}\n\nexport function replaceApp() {\n  if (App) {\n    const originApp = App\n    App = function (appOptions: WechatMiniprogram.App.Option) {\n      const methods = [\n        WxAppEvents.AppOnLaunch,\n        WxAppEvents.AppOnShow,\n        WxAppEvents.AppOnError,\n        WxAppEvents.AppOnUnhandledRejection,\n        WxAppEvents.AppOnPageNotFound,\n        WxAppEvents.AppOnHide\n      ]\n      methods.forEach((method) => {\n        if (getFlag(method)) return\n        addReplaceHandler({\n          callback: (data) => HandleWxAppEvents[method.replace('AppOn', 'on')](data),\n          type: method\n        })\n        replaceOld(\n          appOptions,\n          method.replace('AppOn', 'on'),\n          function (originMethod: voidFun) {\n            return function (...args: any): void {\n              // 让原本的函数比抛出的hooks先执行，便于埋点判断是否重复\n              if (originMethod) {\n                originMethod.apply(this, args)\n              }\n              triggerHandlers.apply(null, [method, ...args])\n            }\n          },\n          true\n        )\n      })\n      return originApp(appOptions)\n    } as WechatMiniprogram.App.Constructor\n  }\n}\n\nconst pageLifeMethods = [\n  WxPageEvents.PageOnShow,\n  WxPageEvents.PageOnHide,\n  WxPageEvents.PageOnShareAppMessage,\n  WxPageEvents.PageOnShareTimeline,\n  WxPageEvents.PageOnTabItemTap\n]\n\n/**\n * 监听配置项下的页面生命周期函数\n */\nfunction replacePageLifeMethods(\n  options:\n    | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n    | WechatMiniprogram.Component.MethodOption\n) {\n  pageLifeMethods.forEach((method) => {\n    replaceOld(\n      options,\n      method.replace('PageOn', 'on'),\n      function (originMethod: (args: any) => void) {\n        return function (...args: any[]): void {\n          triggerHandlers.apply(null, [method, ...args])\n          if (originMethod) {\n            return originMethod.apply(this, args)\n          }\n        }\n      },\n      true\n    )\n  })\n}\n\n// 重写Page\nexport function replacePage() {\n  if (!Page) {\n    return\n  }\n  const originPage = Page\n\n  pageLifeMethods.forEach((method) => {\n    if (getFlag(method)) return\n    addReplaceHandler({\n      callback: (data) => HandleWxPageEvents[method.replace('PageOn', 'on')](data),\n      type: method\n    })\n  })\n  Page = function (pageOptions): WechatMiniprogram.Page.Constructor {\n    replacePageLifeMethods(pageOptions)\n    replaceAction(pageOptions)\n    return originPage.call(this, pageOptions)\n  }\n}\n\n// 重写Component\nexport function replaceComponent() {\n  if (!Component) {\n    return\n  }\n  const originComponent = Component\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  Component = function (componentOptions): WechatMiniprogram.Component.Constructor {\n    if (!isEmptyObject(componentOptions.methods)) {\n      /*\n       * 兼容用Component构造页面的上报\n       * 当用Component构造页面时，页面的生命周期函数应写在methods定义段中，所以重写componentOptions.methods中的对应周期函数\n       */\n      replacePageLifeMethods(componentOptions.methods)\n      replaceAction(componentOptions.methods)\n    }\n    return originComponent.call(this, componentOptions)\n  }\n}\n\n// 重写Behavior\nexport function replaceBehavior() {\n  if (!Behavior) {\n    return\n  }\n  const originBehavior = Behavior\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  Behavior = function (behaviorOptions): WechatMiniprogram.Behavior.Constructor {\n    if (!isEmptyObject(behaviorOptions.methods)) {\n      /*\n       * 当使用Compnent直接构造页面时，用到的behavior中如果有onShow等页面生命周期函数是不会被触发的，所以只用监听手势行为\n       */\n      replaceAction(behaviorOptions.methods)\n    }\n    return originBehavior.call(this, behaviorOptions)\n  }\n}\n/**\n * 监听配置项下的手势处理方法\n */\nfunction replaceAction(\n  options:\n    | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n    | WechatMiniprogram.Component.MethodOption\n) {\n  function gestureTrigger(e) {\n    e.mitoWorked = true // 给事件对象增加特殊的标记，避免被无限透传\n    triggerHandlers(EVENTTYPES.DOM, e)\n  }\n  const throttleGesturetrigger = throttle(gestureTrigger, 500)\n  const linstenerTypes = [ELinstenerTypes.Touchmove, ELinstenerTypes.Tap]\n  if (options) {\n    Object.keys(options).forEach((m) => {\n      if ('function' !== typeof options[m]) {\n        return\n      }\n      replaceOld(\n        options,\n        m,\n        function (originMethod: (args: any) => void) {\n          return function (...args: any): void {\n            const e = args[0]\n            if (e && e.type && e.currentTarget && !e.mitoWorked) {\n              if (linstenerTypes.indexOf(e.type) > -1) {\n                throttleGesturetrigger(e)\n              }\n            }\n            return originMethod.apply(this, args)\n          }\n        },\n        true\n      )\n    })\n  }\n}\n\nfunction replaceConsole() {\n  if (console && variableTypeDetection.isObject(console)) {\n    const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n    logType.forEach(function (level: string): void {\n      if (!(level in console)) return\n      replaceOld(console, level, function (originalConsole): Function {\n        return function (...args: any[]): void {\n          if (originalConsole) {\n            triggerHandlers(EVENTTYPES.CONSOLE, { args, level })\n            originalConsole.apply(console, args)\n          }\n        }\n      })\n    })\n  }\n}\n\n// wx network\nexport function replaceNetwork() {\n  const hookMethods = ['request', 'downloadFile', 'uploadFile']\n  hookMethods.forEach((hook) => {\n    const originRequest = wx[hook]\n    Object.defineProperty(wx, hook, {\n      writable: true,\n      enumerable: true,\n      configurable: true,\n      value: function (...args: any[]) {\n        const options: WechatMiniprogram.RequestOption | WechatMiniprogram.DownloadFileOption | WechatMiniprogram.UploadFileOption = args[0]\n        let method: string\n        if ((options as WechatMiniprogram.RequestOption).method) {\n          method = (options as WechatMiniprogram.RequestOption).method\n        } else if (hook === 'downloadFile') {\n          method = EMethods.Get\n        } else {\n          method = EMethods.Post\n        }\n        const { url } = options\n        let header = options.header\n        !header || (header = {})\n        if ((method === EMethods.Post && transportData.isSdkTransportUrl(url)) || isFilterHttpUrl(url)) {\n          return originRequest.call(this, options)\n        }\n        let reqData\n        if (hook === 'request') {\n          reqData = (options as WechatMiniprogram.RequestOption).data\n        } else if (hook === 'downloadFile') {\n          reqData = {\n            filePath: (options as WechatMiniprogram.DownloadFileOption).filePath\n          }\n        } else {\n          // uploadFile\n          reqData = {\n            filePath: (options as WechatMiniprogram.UploadFileOption).filePath,\n            name: (options as WechatMiniprogram.UploadFileOption).name\n          }\n        }\n        const data: MITOHttp = {\n          type: HTTPTYPE.XHR,\n          method,\n          url,\n          reqData,\n          sTime: getTimestamp()\n        }\n        setTraceId(url, (headerFieldName, traceId) => {\n          data.traceId = traceId\n          header[headerFieldName] = traceId\n        })\n        function setRequestHeader(key: string, value: string) {\n          header[key] = value\n        }\n        sdkOptions.beforeAppAjaxSend && sdkOptions.beforeAppAjaxSend({ method, url }, { setRequestHeader })\n\n        const successHandler:\n          | WechatMiniprogram.RequestSuccessCallback\n          | WechatMiniprogram.DownloadFileSuccessCallback\n          | WechatMiniprogram.UploadFileFailCallback = function (res) {\n          const endTime = getTimestamp()\n          data.responseText = (variableTypeDetection.isString(res.data) || variableTypeDetection.isObject(res.data)) && res.data\n          data.elapsedTime = endTime - data.sTime\n          data.status = res.statusCode\n          data.errMsg = res.errMsg\n          data.time = endTime\n\n          triggerHandlers(EVENTTYPES.XHR, data)\n          if (typeof options.success === 'function') {\n            return options.success(res)\n          }\n        }\n        const _fail = options.fail\n        const failHandler:\n          | WechatMiniprogram.RequestFailCallback\n          | WechatMiniprogram.DownloadFileFailCallback\n          | WechatMiniprogram.UploadFileFailCallback = function (err) {\n          // 系统和网络层面的失败\n          const endTime = getTimestamp()\n          data.elapsedTime = endTime - data.sTime\n          data.errMsg = err.errMsg\n\n          triggerHandlers(EVENTTYPES.XHR, data)\n          if (variableTypeDetection.isFunction(_fail)) {\n            return _fail(err)\n          }\n        }\n        const actOptions = {\n          ...options,\n          success: successHandler,\n          fail: failHandler\n        }\n        return originRequest.call(this, actOptions)\n      }\n    })\n  })\n}\n\n// wx Route\nexport function replaceRoute() {\n  const methods = [\n    WxRouteEvents.SwitchTab,\n    WxRouteEvents.ReLaunch,\n    WxRouteEvents.RedirectTo,\n    WxRouteEvents.NavigateTo,\n    WxRouteEvents.NavigateBack,\n    WxRouteEvents.NavigateToMiniProgram\n  ]\n  methods.forEach((method) => {\n    const originMethod = wx[method] as Function\n    Object.defineProperty(wx, method, {\n      writable: true,\n      enumerable: true,\n      configurable: true,\n      value: function (\n        options:\n          | WechatMiniprogram.SwitchTabOption\n          | WechatMiniprogram.ReLaunchOption\n          | WechatMiniprogram.RedirectToOption\n          | WechatMiniprogram.NavigateToOption\n          | WechatMiniprogram.NavigateBackOption\n          | WechatMiniprogram.NavigateToMiniProgramOption\n      ) {\n        let toUrl\n        if (method === WxRouteEvents.NavigateBack) {\n          toUrl = getNavigateBackTargetUrl((options as WechatMiniprogram.NavigateBackOption)?.delta)\n        } else {\n          toUrl = (options as WechatMiniprogram.SwitchTabOption).url\n        }\n        const data = {\n          from: getCurrentRoute(),\n          to: toUrl\n        }\n        triggerHandlers(EVENTTYPES.MINI_ROUTE, data)\n        // 如果complete||success||fail一个都没有，则原方法返回promise，此时sdk也不需要处理\n        if (\n          variableTypeDetection.isFunction(options.complete) ||\n          variableTypeDetection.isFunction(options.success) ||\n          variableTypeDetection.isFunction(options.fail)\n        ) {\n          const _fail = options.fail\n          const failHandler:\n            | WechatMiniprogram.SwitchTabFailCallback\n            | WechatMiniprogram.ReLaunchFailCallback\n            | WechatMiniprogram.RedirectToFailCallback\n            | WechatMiniprogram.NavigateToFailCallback\n            | WechatMiniprogram.NavigateBackFailCallback = function (res) {\n            const failData: MiniRoute = {\n              ...data,\n              isFail: true,\n              message: res.errMsg\n            }\n            triggerHandlers(EVENTTYPES.MINI_ROUTE, failData)\n            if (variableTypeDetection.isFunction(_fail)) {\n              return _fail(res)\n            }\n          }\n          options.fail = failHandler\n        }\n        if (method === WxRouteEvents.NavigateToMiniProgram && variableTypeDetection.isFunction(sdkOptions.wxNavigateToMiniProgram)) {\n          options = sdkOptions.wxNavigateToMiniProgram(options)\n        }\n        return originMethod.call(this, options)\n      }\n    })\n  })\n}\n","import { EVENTTYPES } from '@mitojs/shared'\nimport { HandleWxConsoleEvents, HandleNetworkEvents, HandleWxEvents, HandleWxPageEvents } from './handleWxEvents'\nimport { addReplaceHandler, replaceApp, replacePage, replaceComponent, replaceBehavior } from './replace'\n\nexport function setupReplace() {\n  replaceApp()\n  replacePage()\n  replaceComponent()\n  replaceBehavior()\n  addReplaceHandler({\n    callback: (data) => HandleWxEvents.handleRoute(data),\n    type: EVENTTYPES.MINI_ROUTE\n  })\n  addReplaceHandler({\n    callback: (data) => {\n      HandleNetworkEvents.handleRequest(data)\n    },\n    type: EVENTTYPES.XHR\n  })\n  addReplaceHandler({\n    callback: (data) => {\n      HandleWxConsoleEvents.console(data)\n    },\n    type: EVENTTYPES.CONSOLE\n  })\n  addReplaceHandler({\n    callback: (data) => HandleWxPageEvents.onAction(data),\n    type: EVENTTYPES.DOM\n  })\n}\n","import { EActionType, ITrackBaseParam, TrackReportData } from '@mitojs/types'\nimport { transportData } from '@mitojs/core'\nimport { generateUUID, getTimestamp } from '@mitojs/utils'\n\nexport function track(actionType: EActionType, param: ITrackBaseParam) {\n  const data = {\n    ...param,\n    // rewrite actionType\n    actionType\n  }\n  sendTrackData(data)\n  return data\n}\n\n/**\n * 手动发送埋点数据到服务端\n * @param data 埋点上报的数据，必须含有actionType属性\n */\nexport function sendTrackData(data: TrackReportData) {\n  const id = generateUUID()\n  const trackTime = getTimestamp()\n  transportData.send({\n    id,\n    trackTime,\n    ...data\n  })\n}\n","import { getBigVersion, getLocationHref, getTimestamp, variableTypeDetection, Severity } from '@mitojs/utils'\nimport { ERRORTYPES, BREADCRUMBTYPES } from '@mitojs/shared'\nimport { ViewModel, VueInstance } from './types'\nimport { breadcrumb, transportData } from '@mitojs/core'\nimport { ReportDataType } from '@mitojs/types'\n\nexport function handleVueError(\n  err: Error,\n  vm: ViewModel,\n  info: string,\n  level: Severity,\n  breadcrumbLevel: Severity,\n  Vue: VueInstance\n): void {\n  const version = Vue?.version\n  let data: ReportDataType = {\n    type: ERRORTYPES.VUE_ERROR,\n    message: `${err.message}(${info})`,\n    level,\n    url: getLocationHref(),\n    name: err.name,\n    stack: err.stack || [],\n    time: getTimestamp()\n  }\n  if (variableTypeDetection.isString(version)) {\n    console.log('getBigVersion', getBigVersion(version))\n    switch (getBigVersion(version)) {\n      case 2:\n        data = { ...data, ...vue2VmHandler(vm) }\n        break\n      case 3:\n        data = { ...data, ...vue3VmHandler(vm) }\n        break\n      default:\n        return\n        break\n    }\n  }\n  breadcrumb.push({\n    type: BREADCRUMBTYPES.VUE,\n    category: breadcrumb.getCategory(BREADCRUMBTYPES.VUE),\n    data,\n    level: breadcrumbLevel\n  })\n  transportData.send(data)\n}\nfunction vue2VmHandler(vm: ViewModel) {\n  let componentName = ''\n  if (vm.$root === vm) {\n    componentName = 'root'\n  } else {\n    const name = vm._isVue ? (vm.$options && vm.$options.name) || (vm.$options && vm.$options._componentTag) : vm.name\n    componentName =\n      (name ? 'component <' + name + '>' : 'anonymous component') +\n      (vm._isVue && vm.$options && vm.$options.__file ? ' at ' + (vm.$options && vm.$options.__file) : '')\n  }\n  return {\n    componentName,\n    propsData: vm.$options && vm.$options.propsData\n  }\n}\nfunction vue3VmHandler(vm: ViewModel) {\n  let componentName = ''\n  if (vm.$root === vm) {\n    componentName = 'root'\n  } else {\n    console.log(vm.$options)\n    const name = vm.$options && vm.$options.name\n    componentName = name ? 'component <' + name + '>' : 'anonymous component'\n  }\n  return {\n    componentName,\n    propsData: vm.$props\n  }\n}\n","import { getFlag, setFlag, slientConsoleScope, Severity } from '@mitojs/utils'\nimport { EVENTTYPES } from '@mitojs/shared'\nimport { VueInstance, ViewModel } from './types'\nimport { handleVueError } from './helper'\n\nconst hasConsole = typeof console !== 'undefined'\n\nconst MitoVue = {\n  install(Vue: VueInstance): void {\n    if (getFlag(EVENTTYPES.VUE) || !Vue || !Vue.config) return\n    setFlag(EVENTTYPES.VUE, true)\n    // vue 提供 warnHandler errorHandler报错信息\n    Vue.config.errorHandler = function (err: Error, vm: ViewModel, info: string): void {\n      handleVueError.apply(null, [err, vm, info, Severity.Normal, Severity.Error, Vue])\n      if (hasConsole && !Vue.config.silent) {\n        slientConsoleScope(() => {\n          console.error('Error in ' + info + ': \"' + err.toString() + '\"', vm)\n          console.error(err)\n        })\n      }\n    }\n  }\n}\n\nexport { MitoVue }\n","import { BREADCRUMBTYPES, ERRORTYPES } from '@mitojs/shared'\nimport { isError, extractErrorStack, Severity } from '@mitojs/utils'\nimport { breadcrumb, transportData } from '@mitojs/core'\nimport { ReportDataType } from '@mitojs/types'\n\n/**\n * 收集react ErrorBoundary中的错误对象\n * 需要用户手动在componentDidCatch中设置\n * @param ex ErrorBoundary中的componentDidCatch的一个参数error\n */\nexport function errorBoundaryReport(ex: any): void {\n  if (!isError(ex)) {\n    console.warn('传入的react error不是一个object Error')\n    return\n  }\n  const error = extractErrorStack(ex, Severity.Normal) as ReportDataType\n  error.type = ERRORTYPES.REACT_ERROR\n  breadcrumb.push({\n    type: BREADCRUMBTYPES.REACT,\n    category: breadcrumb.getCategory(BREADCRUMBTYPES.REACT),\n    data: `${error.name}: ${error.message}`,\n    level: Severity.fromString(error.level)\n  })\n  transportData.send(error)\n}\n","import { InitOptions } from '@mitojs/types'\nimport { isWxMiniEnv } from '@mitojs/utils'\nimport { setupReplace } from './load'\nimport { initOptions, log } from '@mitojs/core'\nimport { sendTrackData, track } from './initiative'\nimport { SDK_NAME, SDK_VERSION } from '@mitojs/shared'\nimport { MitoVue } from '@mitojs/vue'\nimport { errorBoundaryReport } from '@mitojs/react'\nexport function init(options: InitOptions = {}) {\n  if (!isWxMiniEnv) return\n  initOptions(options)\n  setupReplace()\n  Object.assign(wx, { mitoLog: log, SDK_NAME, SDK_VERSION })\n}\nexport { log, sendTrackData, track, MitoVue, errorBoundaryReport }\n"],"names":["options","sdkOptions"],"mappings":"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"}